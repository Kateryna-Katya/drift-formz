{"version":3,"file":"main-Cq1hyDSq.js","sources":["../../src/main.js"],"sourcesContent":["/**\n * DRIFT-FORMZ.BLOG - Core Engine\n * Version: 1.0.2\n */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    'use strict';\n\n    // --- 1. ИНИЦИАЛИЗАЦИЯ ИКОНОК ---\n    const initIcons = () => {\n        if (typeof lucide !== 'undefined') {\n            lucide.createIcons();\n        }\n    };\n\n    // --- 2. ПЛАВНЫЙ СКРОЛЛ (LENIS) ---\n    const initSmoothScroll = () => {\n        const lenis = new Lenis({\n            duration: 1.2,\n            easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n            direction: 'vertical',\n            gestureDirection: 'vertical',\n            smooth: true,\n            mouseMultiplier: 1,\n            touchMultiplier: 2,\n            infinite: false,\n        });\n\n        function raf(time) {\n            lenis.raf(time);\n            requestAnimationFrame(raf);\n        }\n\n        requestAnimationFrame(raf);\n\n        // Синхронизация ScrollTrigger с Lenis\n        lenis.on('scroll', ScrollTrigger.update);\n        \n        gsap.ticker.add((time) => {\n            lenis.raf(time * 1000);\n        });\n        \n        gsap.ticker.lagSmoothing(0);\n    };\n\n    // --- 3. МОБИЛЬНОЕ МЕНЮ ---\n    const initMobileMenu = () => {\n        const burger = document.getElementById('burger-menu');\n        const menu = document.getElementById('mobile-menu');\n        const links = document.querySelectorAll('.mobile-nav__link');\n        const body = document.body;\n\n        const toggleMenu = () => {\n            burger.classList.toggle('active');\n            menu.classList.toggle('active');\n            // Блокируем скролл при открытом меню\n            body.style.overflow = menu.classList.contains('active') ? 'hidden' : '';\n        };\n\n        burger.addEventListener('click', toggleMenu);\n\n        links.forEach(link => {\n            link.addEventListener('click', () => {\n                if (menu.classList.contains('active')) toggleMenu();\n            });\n        });\n    };\n\n    // --- 4. HEADER ЭФФЕКТЫ ---\n    const initHeader = () => {\n        const header = document.querySelector('.header');\n        window.addEventListener('scroll', () => {\n            if (window.scrollY > 100) {\n                header.classList.add('header--scrolled');\n            } else {\n                header.classList.remove('header--scrolled');\n            }\n        });\n    };\n\n    // --- 5. GSAP АНИМАЦИИ (HERO & SCROLL) ---\n    const initAnimations = () => {\n        // Регистрация плагина\n        gsap.registerPlugin(ScrollTrigger);\n\n        // Анимация заголовка (SplitType)\n        const titleElement = document.querySelector('#hero-title');\n        if (titleElement) {\n            const splitText = new SplitType(titleElement, { \n                types: 'words, chars',\n                tagName: 'span' \n            });\n\n            const tl = gsap.timeline();\n\n            tl.from(splitText.chars, {\n                opacity: 0,\n                y: 100,\n                rotateX: -90,\n                stagger: 0.02,\n                duration: 1.2,\n                ease: \"expo.out\",\n                clearProps: \"all\"\n            })\n            .from('.hero__subtitle', {\n                opacity: 0,\n                y: 20,\n                duration: 1\n            }, \"-=0.8\")\n            .from('.hero__actions', {\n                opacity: 0,\n                y: 20,\n                duration: 1\n            }, \"-=0.8\");\n        }\n\n        // Появление секций при скролле\n        gsap.utils.toArray('.benefit-card').forEach((card, i) => {\n            gsap.from(card, {\n                scrollTrigger: {\n                    trigger: card,\n                    start: \"top bottom-=100\",\n                    toggleActions: \"play none none reverse\"\n                },\n                opacity: 0,\n                y: 50,\n                duration: 0.8,\n                delay: i * 0.1\n            });\n        });\n\n        // Эффект параллакса для изображений\n        gsap.to('.img-tilt', {\n            scrollTrigger: {\n                trigger: '.platform',\n                start: \"top bottom\",\n                end: \"bottom top\",\n                scrub: true\n            },\n            y: -50,\n            rotate: 0\n        });\n    };\n\n    // --- 6. ФОРМА ОБРАТНОЙ СВЯЗИ & ВАЛИДАЦИЯ ---\n    const initContactForm = () => {\n        const form = document.getElementById('main-form');\n        if (!form) return;\n\n        const phoneInput = document.getElementById('phone-input');\n        const captchaLabel = document.getElementById('captcha-label');\n        const captchaInput = document.getElementById('captcha-input');\n        const formMessage = document.getElementById('form-message');\n\n        // Генерация капчи\n        const n1 = Math.floor(Math.random() * 10) + 1;\n        const n2 = Math.floor(Math.random() * 10) + 1;\n        const correctAnswer = n1 + n2;\n        \n        if (captchaLabel) {\n            captchaLabel.innerText = `Подтвердите, что вы не робот: ${n1} + ${n2} = ?`;\n        }\n\n        // Валидация телефона (только цифры)\n        phoneInput.addEventListener('input', (e) => {\n            e.target.value = e.target.value.replace(/[^\\d+]/g, '');\n        });\n\n        form.addEventListener('submit', async (e) => {\n            e.preventDefault();\n\n            // Проверка капчи\n            if (parseInt(captchaInput.value) !== correctAnswer) {\n                formMessage.textContent = 'Ошибка: Неверный ответ капчи.';\n                formMessage.style.color = '#ff4d4d';\n                return;\n            }\n\n            // Имитация отправки (AJAX)\n            const submitBtn = form.querySelector('button');\n            const originalBtnText = submitBtn.innerText;\n            \n            submitBtn.disabled = true;\n            submitBtn.innerText = 'Отправка...';\n            formMessage.textContent = '';\n\n            try {\n                // Имитируем задержку сервера\n                await new Promise(resolve => setTimeout(resolve, 2000));\n                \n                form.reset();\n                formMessage.style.color = 'var(--color-accent)';\n                formMessage.textContent = 'Успешно! Мы перезвоним вам в течение дня.';\n                \n                // Сброс сообщения через 5 сек\n                setTimeout(() => { formMessage.textContent = ''; }, 5000);\n            } catch (err) {\n                formMessage.textContent = 'Произошла ошибка. Попробуйте позже.';\n                formMessage.style.color = '#ff4d4d';\n            } finally {\n                submitBtn.disabled = false;\n                submitBtn.innerText = originalBtnText;\n            }\n        });\n    };\n\n    // --- 7. COOKIE POPUP ---\n    const initCookies = () => {\n        const popup = document.getElementById('cookie-popup');\n        const acceptBtn = document.getElementById('accept-cookies');\n\n        if (!localStorage.getItem('drift_cookies_accepted')) {\n            setTimeout(() => {\n                popup.classList.add('show');\n            }, 3000);\n        }\n\n        acceptBtn.addEventListener('click', () => {\n            localStorage.setItem('drift_cookies_accepted', 'true');\n            popup.classList.remove('show');\n        });\n    };\n\n    // --- ЗАПУСК ВСЕХ МОДУЛЕЙ ---\n    initIcons();\n    initSmoothScroll();\n    initMobileMenu();\n    initHeader();\n    initAnimations();\n    initContactForm();\n    initCookies();\n\n    console.log('%c Drift-Formz Blog Engine Loaded ', 'background: #CCFF00; color: #000; font-weight: bold;');\n});"],"names":["initIcons","initSmoothScroll","lenis","t","raf","time","initMobileMenu","burger","menu","links","body","toggleMenu","link","initHeader","header","initAnimations","titleElement","splitText","card","i","initContactForm","form","phoneInput","captchaLabel","captchaInput","formMessage","n1","n2","correctAnswer","e","submitBtn","originalBtnText","resolve","initCookies","popup","acceptBtn"],"mappings":"ssBAKA,SAAS,iBAAiB,mBAAoB,IAAM,CAIhD,MAAMA,EAAY,IAAM,CAChB,OAAO,OAAW,KAClB,OAAO,YAAa,CAE3B,EAGKC,EAAmB,IAAM,CAC3B,MAAMC,EAAQ,IAAI,MAAM,CACpB,SAAU,IACV,OAASC,GAAM,KAAK,IAAI,EAAG,MAAQ,KAAK,IAAI,EAAG,IAAMA,CAAC,CAAC,EACvD,UAAW,WACX,iBAAkB,WAClB,OAAQ,GACR,gBAAiB,EACjB,gBAAiB,EACjB,SAAU,EACtB,CAAS,EAED,SAASC,EAAIC,EAAM,CACfH,EAAM,IAAIG,CAAI,EACd,sBAAsBD,CAAG,CACrC,CAEQ,sBAAsBA,CAAG,EAGzBF,EAAM,GAAG,SAAU,cAAc,MAAM,EAEvC,KAAK,OAAO,IAAKG,GAAS,CACtBH,EAAM,IAAIG,EAAO,GAAI,CACjC,CAAS,EAED,KAAK,OAAO,aAAa,CAAC,CAC7B,EAGKC,EAAiB,IAAM,CACzB,MAAMC,EAAS,SAAS,eAAe,aAAa,EAC9CC,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAQ,SAAS,iBAAiB,mBAAmB,EACrDC,EAAO,SAAS,KAEhBC,EAAa,IAAM,CACrBJ,EAAO,UAAU,OAAO,QAAQ,EAChCC,EAAK,UAAU,OAAO,QAAQ,EAE9BE,EAAK,MAAM,SAAWF,EAAK,UAAU,SAAS,QAAQ,EAAI,SAAW,EACxE,EAEDD,EAAO,iBAAiB,QAASI,CAAU,EAE3CF,EAAM,QAAQG,GAAQ,CAClBA,EAAK,iBAAiB,QAAS,IAAM,CAC7BJ,EAAK,UAAU,SAAS,QAAQ,GAAGG,EAAY,CACnE,CAAa,CACb,CAAS,CACJ,EAGKE,EAAa,IAAM,CACrB,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC/C,OAAO,iBAAiB,SAAU,IAAM,CAChC,OAAO,QAAU,IACjBA,EAAO,UAAU,IAAI,kBAAkB,EAEvCA,EAAO,UAAU,OAAO,kBAAkB,CAE1D,CAAS,CACJ,EAGKC,EAAiB,IAAM,CAEzB,KAAK,eAAe,aAAa,EAGjC,MAAMC,EAAe,SAAS,cAAc,aAAa,EACzD,GAAIA,EAAc,CACd,MAAMC,EAAY,IAAI,UAAUD,EAAc,CAC1C,MAAO,eACP,QAAS,MACzB,CAAa,EAEU,KAAK,SAAU,EAEvB,KAAKC,EAAU,MAAO,CACrB,QAAS,EACT,EAAG,IACH,QAAS,IACT,QAAS,IACT,SAAU,IACV,KAAM,WACN,WAAY,KACf,CAAA,EACA,KAAK,kBAAmB,CACrB,QAAS,EACT,EAAG,GACH,SAAU,CAC1B,EAAe,OAAO,EACT,KAAK,iBAAkB,CACpB,QAAS,EACT,EAAG,GACH,SAAU,CACb,EAAE,OAAO,CACtB,CAGQ,KAAK,MAAM,QAAQ,eAAe,EAAE,QAAQ,CAACC,EAAMC,IAAM,CACrD,KAAK,KAAKD,EAAM,CACZ,cAAe,CACX,QAASA,EACT,MAAO,kBACP,cAAe,wBAClB,EACD,QAAS,EACT,EAAG,GACH,SAAU,GACV,MAAOC,EAAI,EAC3B,CAAa,CACb,CAAS,EAGD,KAAK,GAAG,YAAa,CACjB,cAAe,CACX,QAAS,YACT,MAAO,aACP,IAAK,aACL,MAAO,EACV,EACD,EAAG,IACH,OAAQ,CACpB,CAAS,CACJ,EAGKC,EAAkB,IAAM,CAC1B,MAAMC,EAAO,SAAS,eAAe,WAAW,EAChD,GAAI,CAACA,EAAM,OAEX,MAAMC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAe,SAAS,eAAe,eAAe,EACtDC,EAAe,SAAS,eAAe,eAAe,EACtDC,EAAc,SAAS,eAAe,cAAc,EAGpDC,EAAK,KAAK,MAAM,KAAK,OAAQ,EAAG,EAAE,EAAI,EACtCC,EAAK,KAAK,MAAM,KAAK,OAAQ,EAAG,EAAE,EAAI,EACtCC,EAAgBF,EAAKC,EAEvBJ,IACAA,EAAa,UAAY,iCAAiCG,CAAE,MAAMC,CAAE,QAIxEL,EAAW,iBAAiB,QAAUO,GAAM,CACxCA,EAAE,OAAO,MAAQA,EAAE,OAAO,MAAM,QAAQ,UAAW,EAAE,CACjE,CAAS,EAEDR,EAAK,iBAAiB,SAAU,MAAOQ,GAAM,CAIzC,GAHAA,EAAE,eAAgB,EAGd,SAASL,EAAa,KAAK,IAAMI,EAAe,CAChDH,EAAY,YAAc,gCAC1BA,EAAY,MAAM,MAAQ,UAC1B,MAChB,CAGY,MAAMK,EAAYT,EAAK,cAAc,QAAQ,EACvCU,EAAkBD,EAAU,UAElCA,EAAU,SAAW,GACrBA,EAAU,UAAY,cACtBL,EAAY,YAAc,GAE1B,GAAI,CAEA,MAAM,IAAI,QAAQO,GAAW,WAAWA,EAAS,GAAI,CAAC,EAEtDX,EAAK,MAAO,EACZI,EAAY,MAAM,MAAQ,sBAC1BA,EAAY,YAAc,4CAG1B,WAAW,IAAM,CAAEA,EAAY,YAAc,EAAK,EAAE,GAAI,CAC3D,MAAa,CACVA,EAAY,YAAc,sCAC1BA,EAAY,MAAM,MAAQ,SAC1C,QAAsB,CACNK,EAAU,SAAW,GACrBA,EAAU,UAAYC,CACtC,CACA,CAAS,CACJ,EAGKE,EAAc,IAAM,CACtB,MAAMC,EAAQ,SAAS,eAAe,cAAc,EAC9CC,EAAY,SAAS,eAAe,gBAAgB,EAErD,aAAa,QAAQ,wBAAwB,GAC9C,WAAW,IAAM,CACbD,EAAM,UAAU,IAAI,MAAM,CAC7B,EAAE,GAAI,EAGXC,EAAU,iBAAiB,QAAS,IAAM,CACtC,aAAa,QAAQ,yBAA0B,MAAM,EACrDD,EAAM,UAAU,OAAO,MAAM,CACzC,CAAS,CACJ,EAGDlC,EAAW,EACXC,EAAkB,EAClBK,EAAgB,EAChBO,EAAY,EACZE,EAAgB,EAChBK,EAAiB,EACjBa,EAAa,EAEb,QAAQ,IAAI,qCAAsC,sDAAsD,CAC5G,CAAC"}